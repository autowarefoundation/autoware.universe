{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "autoware_tensorrt_yolox parameter",
  "type": "object",
  "definitions": {
    "yolox_s_plus_opt": {
      "type": "object",
      "properties": {
        "is_roi_overlap_segment": {
          "type": "boolean",
          "description": "Enable or disable ROI overlap segmentation. Disable when semantic segmentation accuracy is sufficient.",
          "default": true
        },
        "overlap_roi_score_threshold": {
          "type": "number",
          "description": "Minimum existence probability of detected ROI to replace segmentation.",
          "default": 0.3
        },
        "is_publish_color_mask": {
          "type": "boolean",
          "description": "Enable or disable publishing color masks for result visualization.",
          "default": false
        },
        "roi_overlay_segment_label": {
          "type": "object",
          "description": "Specify which labels to refine in segmentation using ROI.",
          "properties": {
            "UNKNOWN": { "type": "boolean", "default": true },
            "CAR": { "type": "boolean", "default": false },
            "TRUCK": { "type": "boolean", "default": false },
            "BUS": { "type": "boolean", "default": false },
            "MOTORCYCLE": { "type": "boolean", "default": true },
            "BICYCLE": { "type": "boolean", "default": true },
            "PEDESTRIAN": { "type": "boolean", "default": true },
            "ANIMAL": { "type": "boolean", "default": true }
          },
          "additionalProperties": false
        },
        "model_path": {
          "type": "string",
          "description": "Path to ONNX model.",
          "default": "$(var data_path)/tensorrt_yolox/$(var model_name).onnx"
        },
        "label_path": {
          "type": "string",
          "description": "Path to label file.",
          "default": "$(var data_path)/tensorrt_yolox/label.txt"
        },
        "color_map_path": {
          "type": "string",
          "description": "Path to semantic segmentation color map.",
          "default": "$(var data_path)/tensorrt_yolox/semseg_color_map.csv"
        },
        "score_threshold": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "description": "Threshold for object existence probability. Objects with scores below this value are ignored.",
          "default": 0.35
        },
        "nms_threshold": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "description": "Threshold value for Non-Maximum Suppression (NMS).",
          "default": 0.7
        },
        "precision": {
          "type": "string",
          "description": "Operation precision for inference. Options: fp32, fp16, int8.",
          "default": "int8"
        },
        "calibration_algorithm": {
          "type": "string",
          "description": "Algorithm for quantization calibration when precision is int8. Options: Entropy, (Legacy | Percentile), MinMax.",
          "default": "Entropy"
        },
        "dla_core_id": {
          "type": "integer",
          "description": "DLA core ID for inference. If positive, assigns inference task to the specified DLA core.",
          "default": -1
        },
        "quantize_first_layer": {
          "type": "boolean",
          "description": "Enable fp16 precision for the first (input) layer when precision is int8.",
          "default": false
        },
        "quantize_last_layer": {
          "type": "boolean",
          "description": "Enable fp16 precision for the last (output) layer when precision is int8.",
          "default": false
        },
        "profile_per_layer": {
          "type": "boolean",
          "description": "Enable profiler for each layer. Recommended only for development.",
          "default": false
        },
        "clip_value": {
          "type": "number",
          "description": "Maximum clipping value for layer output. Valid only for int8 precision.",
          "default": 6.0
        },
        "preprocess_on_gpu": {
          "type": "boolean",
          "description": "Enable preprocessing on GPU.",
          "default": true
        },
        "gpu_id": {
          "type": "integer",
          "description": "GPU ID for selecting CUDA device.",
          "default": 0
        },
        "calibration_image_list_path": {
          "type": "string",
          "description": "Path to file containing image paths for int8 quantization calibration.",
          "default": ""
        }
      },
      "required": [
        "is_roi_overlap_segment",
        "overlap_roi_score_threshold",
        "is_publish_color_mask",
        "roi_overlay_segment_label",
        "model_path",
        "label_path",
        "color_map_path",
        "score_threshold",
        "nms_threshold",
        "precision",
        "calibration_algorithm",
        "dla_core_id",
        "quantize_first_layer",
        "quantize_last_layer",
        "profile_per_layer",
        "clip_value",
        "preprocess_on_gpu",
        "gpu_id",
        "calibration_image_list_path"
      ],
      "additionalProperties": false
    }
  },
  "properties": {
    "/**": {
      "type": "object",
      "properties": {
        "ros__parameters": {
          "$ref": "#/definitions/yolox_s_plus_opt"
        }
      },
      "required": ["ros__parameters"],
      "additionalProperties": false
    }
  },
  "required": ["/**"],
  "additionalProperties": false
}
